<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SynthDiag.jl · SynthDiag</title><meta name="title" content="SynthDiag.jl · SynthDiag"/><meta property="og:title" content="SynthDiag.jl · SynthDiag"/><meta property="twitter:title" content="SynthDiag.jl · SynthDiag"/><meta name="description" content="Documentation for SynthDiag."/><meta property="og:description" content="Documentation for SynthDiag."/><meta property="twitter:description" content="Documentation for SynthDiag."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>SynthDiag</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>SynthDiag.jl</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Synthetic-Diagnostics"><span>Synthetic Diagnostics</span></a></li><li><a class="tocitem" href="#Synthetic-Actuators"><span>Synthetic Actuators</span></a></li><li><a class="tocitem" href="#Noise-model"><span>Noise model</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>SynthDiag.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SynthDiag.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/SynthDiag.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="SynthDiag.jl"><a class="docs-heading-anchor" href="#SynthDiag.jl">SynthDiag.jl</a><a id="SynthDiag.jl-1"></a><a class="docs-heading-anchor-permalink" href="#SynthDiag.jl" title="Permalink"></a></h1><ul><li><a href="#SynthDiag.jl">SynthDiag.jl</a></li><li class="no-marker"><ul><li><a href="#Installation">Installation</a></li><li><a href="#Synthetic-Diagnostics">Synthetic Diagnostics</a></li><li class="no-marker"><ul><li><a href="#Interferometer">Interferometer</a></li><li><a href="#Langmuir-Probes">Langmuir Probes</a></li></ul></li><li><a href="#Synthetic-Actuators">Synthetic Actuators</a></li><li class="no-marker"><ul><li><a href="#Gas-Injection">Gas Injection</a></li></ul></li><li><a href="#Noise-model">Noise model</a></li></ul></li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>SynthDiag is registered with public repository <a href="https://github.com/ProjectTorreyPines/FuseRegistry.jl/">FuseRegistry</a>. For installation:</p><pre><code class="nohighlight hljs">using Pkg
Pkg.Registry.add(RegistrySpec(url=&quot;https://github.com/ProjectTorreyPines/FuseRegistry.jl.git&quot;))
Pkg.Registry.add(&quot;General&quot;)
Pkg.add(&quot;SynthDiag&quot;)</code></pre><h2 id="Synthetic-Diagnostics"><a class="docs-heading-anchor" href="#Synthetic-Diagnostics">Synthetic Diagnostics</a><a id="Synthetic-Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Synthetic-Diagnostics" title="Permalink"></a></h2><h3 id="Interferometer"><a class="docs-heading-anchor" href="#Interferometer">Interferometer</a><a id="Interferometer-1"></a><a class="docs-heading-anchor-permalink" href="#Interferometer" title="Permalink"></a></h3><p>Synthetic interferometer can be added using IMAS compatible <code>JSON</code> file that describes the metadata and the line of sight of chords. On computation, the interferometer uses edge profiles and core profiles data in the IMAS IDS to numerically integrate electron density along the line of sight and returns data in IMAS IDS interferometer object.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.add_interferometer!" href="#SynthDiag.add_interferometer!"><code>SynthDiag.add_interferometer!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_interferometer!(
    config::String=default_ifo,
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite::Bool=false, verbose::Bool=false, rtol::Float64=1e-3, n_e_gsi::Int=5,
)::IMASDD.dd</code></pre><p>Add interferometer to IMAS structure using a JSON file and compute the line integrated electron density if not present</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/interferometer.jl#L10-L19">source</a></section><section><div><pre><code class="language-julia hljs">add_interferometer!(
    config::Dict{Symbol, Any},
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite::Bool=false, verbose::Bool=false, rtol::Float64=1e-3, n_e_gsi::Int=5,
)::IMASDD.dd</code></pre><p>Add interferometer to IMAS structure using a Dict and compute the line integrated electron density if not present</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/interferometer.jl#L41-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.compute_interferometer!" href="#SynthDiag.compute_interferometer!"><code>SynthDiag.compute_interferometer!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_interferometer!(
    @nospecialize(ids::IMASDD.dd);
    rtol::Float64=1e-3,
    n_e_gsi::Int=5,
)</code></pre><p>Computed the line integrated electron density from the interferometer data present in IDS structure for all the chords. The computation is based on the edge profile data and core profile data present in the IDS structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/interferometer.jl#L103-L113">source</a></section></article><h3 id="Langmuir-Probes"><a class="docs-heading-anchor" href="#Langmuir-Probes">Langmuir Probes</a><a id="Langmuir-Probes-1"></a><a class="docs-heading-anchor-permalink" href="#Langmuir-Probes" title="Permalink"></a></h3><p>Langmuir probes can be added using IMAS compatible <code>JSON</code> file that describes the metadata and positions of embedded or reciprocating probes. Computation is currently supported for embedded langmuir probes only which uses the edge profiles data to report the edge electron and average ion temperature and electron density. If plasma potential and probe biasing information is available, it will use a langmuir probe current model to also calculate the ion saturaton current and current density as reported by a typical probe in IMAS data format.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.add_langmuir_probes!" href="#SynthDiag.add_langmuir_probes!"><code>SynthDiag.add_langmuir_probes!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_langmuir_probes!(
    config::String=default_lp,
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite=false, verbose=false, kwargs...,
)::IMASDD.dd</code></pre><p>Add langmuir probes positions and other parameters from <code>JSON</code> file to ids structure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/langmuir_probes.jl#L8-L16">source</a></section><section><div><pre><code class="language-julia hljs">add_langmuir_probes!(
    config::Dict{Symbol, Any},
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite=false, verbose=false, kwargs...,
)::IMASDD.dd</code></pre><p>Add langmuir probes positions and other parameters from Dictionary to ids structure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/langmuir_probes.jl#L37-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.compute_langmuir_probes!" href="#SynthDiag.compute_langmuir_probes!"><code>SynthDiag.compute_langmuir_probes!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_langmuir_probes!(
    ids::IMASDD.dd;
    v_plasma::Union{Float64, Vector{Float64}, Nothing}=nothing,
    v_floating::Union{Float64, Vector{Float64}, Nothing}=nothing,
    v_probe::Union{Float64, Vector{Float64}, Nothing}=nothing,
    v_plasma_noise::Union{Noise, Nothing}=nothing,
    Z_eff::Float64=1.0,
    m_i_amu::Float64=2.014, # Deuterium
    probe_type::Symbol=:cylindrical,
    ne_noise::Union{Noise, Nothing}=nothing,
    te_noise::Union{Noise, Nothing}=nothing,
    ti_noise::Union{Noise, Nothing}=nothing,
    n_e_gsi::Int=5,
)</code></pre><p>Compute langmuir probe outputs for all the embedded langmuir probes in the ids structure using edge profiles data. If <code>v_plasma</code> or <code>v_floating</code> are provided along with <code>v_probe</code>, then <a href="#SynthDiag.langmuir_probe_current"><code>langmuir_probe_current()</code></a> is used to compute the ion saturation current and parallel current density and stored in the IDS. Noise models can be added for electron density and temperature and ion average temperature as power spectral densities using data type <a href="#SynthDiag.Noise"><code>Noise</code></a>.</p><p>Input arguments:</p><ul><li><code>ids</code>: IMASDD.dd object</li><li><code>v_plasma</code>: Plasma potential (in V) or a vector of plasma potentials for each time step</li><li><code>v_floating</code>: Floating potential (in V) or a vector of floating potentials for each time step</li><li><code>v_probe</code>: Probe potential (in V) or a vector of probe potentials for each time step</li><li><code>v_plasma_noise</code>: Noise object for plasma potential</li><li><code>Z_eff</code>: Effective charge of the ion</li><li><code>m_i_amu</code>: Ion mass in atomic mass units (amu)</li><li><code>probe_type</code>: Type of the probe, either :cylindrical or :spherical</li><li><code>ne_noise</code>: Noise object for electron density</li><li><code>te_noise</code>: Noise object for electron temperature</li><li><code>ti_noise</code>: Noise object for average ion temperature</li><li><code>n_e_gsi</code>: Grid subset index that is used in edge profiles data for electron density, electron temperature, and average ion temperature.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/langmuir_probes.jl#L128-L168">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.langmuir_probe_current" href="#SynthDiag.langmuir_probe_current"><code>SynthDiag.langmuir_probe_current</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">langmuir_probe_current(
    Δv::Float64,
    Te::Float64,
    Ti=::Float64,
    ne::Float64,
    A::Float64,
    m_i_amu=2.04,
    Z_eff::Float64=1.0;
    probe_type::Symbol=:cylindrical,
)::Float64</code></pre><p>Langmuir Probe current model for cylindrical and spherical probes.</p><p>For <code>Δv</code> &lt;= 0:</p><p><span>$I_{probe} = -I_{isc} (1 - \frac{Δv}{T_i})^{ex} - I_{esc} e^{\frac{Δv}{T_e}}$</span></p><p>For <code>Δv</code> &gt; 0:</p><p><span>$I_{probe} = -I_{esc} (1 + \frac{Δv}{T_e})^{ex} - I_{isc} e^{-\frac{Δv}{T_i}}$</span></p><p>where</p><p><span>$I_{isc} = \frac{1}{2} A q_i n_e \sqrt{e (T_e + T_i) / m_i}$</span></p><p><span>$I_{esc} = -\frac{1}{4} A e n_e \sqrt{8 e T_e / m_e}$</span></p><p>where <code>A</code> is the effective surface area of the probe, <code>q_i</code>(<code>Z_eff</code>e) is the total charge of the ion, and <code>ex</code> is 1 for spherical and 0.5 for cylindrical probes.</p><p>Input arguments:</p><ul><li><code>Δv</code>: Bias voltage (<code>v_probe</code> - <code>v_plasma</code>)</li><li><code>Te</code>: Electron temperature (in eV)</li><li><code>Ti</code>: Ion temperature (in eV)</li><li><code>ne</code>: Electron density (in <span>$m^{-3}$</span>)</li><li><code>A</code>: Effective surface area of the probe (in <span>$m^{2}$</span>)</li><li><code>m_i_amu</code>: Ion mass in atomic mass units (amu)</li><li><code>Z_eff</code>: Effective charge of the ion (in units of elementary charge e)</li><li><code>probe_type</code>: Type of the probe, either :cylindrical or :spherical</li></ul><p>Ref: L. Conde, &quot;<a href="https://api.semanticscholar.org/CorpusID:53622081">An introduction to Langmuir probe diagnostics of plasmas</a>&quot; (2011)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/langmuir_probes.jl#L299-L342">source</a></section></article><h2 id="Synthetic-Actuators"><a class="docs-heading-anchor" href="#Synthetic-Actuators">Synthetic Actuators</a><a id="Synthetic-Actuators-1"></a><a class="docs-heading-anchor-permalink" href="#Synthetic-Actuators" title="Permalink"></a></h2><h3 id="Gas-Injection"><a class="docs-heading-anchor" href="#Gas-Injection">Gas Injection</a><a id="Gas-Injection-1"></a><a class="docs-heading-anchor-permalink" href="#Gas-Injection" title="Permalink"></a></h3><p>Gas valves can be added using IMAS compatible <code>JSON</code> file that describes the metadata, response curve, and positions of gas valves. If <code>ids.gas_injection.valve[:].voltage.data</code> is present, the gas output flow rate is calculated. Additionally, if a valve model dictionary is passed, more realistic actuation can be modeled that includes second order low pass effect, latency, and dribble effect.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.add_gas_injection!" href="#SynthDiag.add_gas_injection!"><code>SynthDiag.add_gas_injection!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_gas_injection!(
    config::String=default_gas_injection,
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite::Bool=false,
    verbose::Bool=false,
)::IMASDD.dd</code></pre><p>Add gas valves from a JSON file and compute the gas flow rate based on the command signal in the gas valves.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L12-L22">source</a></section><section><div><pre><code class="language-julia hljs">add_gas_injection!(
    config::Dict{Symbol, Any},
    @nospecialize(ids::IMASDD.dd)=IMASDD.dd();
    overwrite::Bool=false,
    verbose::Bool=false,
)::IMASDD.dd</code></pre><p>Add gas valves from a dictionary and compute the gas flow rate based on the command signal in the gas valves.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L38-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.compute_gas_injection" href="#SynthDiag.compute_gas_injection"><code>SynthDiag.compute_gas_injection</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_gas_injection(
    tt::Vector{Float64},
    cmd_voltage::Vector{Float64},
    response_curve_voltage::Vector{Float64},
    response_curve_flow_rate::Vector{Float64};
    valve_model::Dict{Symbol, Any}=Dict{Symbol, Any}(),
    global_latency::Float64=0.0,
)::Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}</code></pre><p>Lowest level function to compute gas flow rate based on the command voltage data and response cruve data all provided in base Julia types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L177-L189">source</a></section><section><div><pre><code class="language-julia hljs">compute_gas_injection(
    tt::Vector{Float64},
    cmd_voltage::Vector{Float64},
    response_curve::IMASDD.gas_injection__valve___response_curve;
    valve_model::Dict{Symbol, Any}=Dict{Symbol, Any}(),
    global_latency::Float64=0.0,
)::Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}</code></pre><p>Convinience function format where response curve is provided as the ids type but everything else is provided in base Julia types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L243-L254">source</a></section><section><div><pre><code class="language-julia hljs">compute_gas_injection(
    valve::IMASDD.gas_injection__valve;
    valve_model::Dict{Symbol, Any}=Dict{Symbol, Any}(),
    global_latency::Float64=0.0,
)::Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}</code></pre><p>Top most level function to compute gas flow rate for a single valve.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L272-L280">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.compute_gas_injection!" href="#SynthDiag.compute_gas_injection!"><code>SynthDiag.compute_gas_injection!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_gas_injection!(
    ids::IMASDD.dd;
    valves::Dict{String, Dict{Symbol, Any}}=Dict{String, Dict{Symbol, Any}}(),
)::Array{Vector{Float64}}</code></pre><p>Compute the gas flow rate based on the command signal in the all gas valves.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L100-L107">source</a></section><section><div><pre><code class="language-julia hljs">compute_gas_injection!(
    valve::IMASDD.gas_injection__valve;
    valve_model::Dict{Symbol, Any}=Dict{Symbol, Any}(),
    global_latency::Float64=0.0,
)::Vector{Float64}</code></pre><p>In-place version of <a href="#SynthDiag.compute_gas_injection"><code>compute_gas_injection</code></a> function for a single valve.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L295-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.get_lpf" href="#SynthDiag.get_lpf"><code>SynthDiag.get_lpf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_lpf(
    fs::Float64,
    tau::Float64,
    damping::Float64,
    gain::Float64,
)::SecondOrderSections</code></pre><p>Create a second order filter with the given parameters. The filter is created in the s-domain and then converted to the z-domain using bilinear transform. In s-domain, the filter transfer function is:</p><p><span>$H(s) = k \frac{ωₙ^2}{ s^2 + 2 \gamma ωₙ s + ωₙ^2}$</span></p><p>where ωₙ = 2π / <code>tau</code>, <span>$\gamma$</span> is <code>damping</code> and <code>k</code> is <code>gain</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L319-L334">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.dribble" href="#SynthDiag.dribble"><code>SynthDiag.dribble</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dribble(
    data::Vector{Float64},
    decay_time_constant::Float64,
    fs::Float64,
)::Vector{Float64}</code></pre><p>Function to model dribble effect when gas command falls too sharply due to remaining gas in the pipe. The function compares change in <code>data</code>(<code>ΔD</code>) at every time step with</p><p><span>$ΔD &lt; -\frac{1}{τ f_s} e^{ - \left( \frac{1}{τ f_s} \right) }$</span></p><p>where <code>τ</code>(<code>decay_time_constant</code>) is the decay time constant and <span>$f_s$</span>(<code>f_s</code>) is the sampling frequency. If the above condition is found true, the function forces <code>data</code> to decay exponentially with the decay time constant untill the condition is false. The function returns the modified <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L348-L364">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.downsample_smooth" href="#SynthDiag.downsample_smooth"><code>SynthDiag.downsample_smooth</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">downsample_smooth(
    tt::Vector{Float64},
    data::Vector{Float64},
    dt_res::Float64;
    default_start=0.0,
)::Vector{Float64}</code></pre><p>Downsample and smooth the data to a new time resolution. The time axis does not need to be equally spaced in time. The function creates a new time axis with spacing given by <code>dt_res</code> and then averages the data points that fall within the new time bin. If no data points fall within the new time bin, the function uses the last data point to fill the new time bin. <code>default_start</code> is used to fill first time bin if no data is present in the first time bin.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L386-L400">source</a></section><section><div><pre><code class="language-julia hljs">downsample_smooth(
    tt::Vector{Float64},
    data::Vector{Float64},
    tt_res::Vector{Float64};
    default_start=0.0,
)::Vector{Float64}</code></pre><p>Downsample and smooth the data to a new time resolution. The time axis does not need to be equally spaced in time. The function uses <code>tt_res</code> as the new resampled time axis and averages the data points that fall within the new time bin. If no data points fall within the new time bin, the function uses the last data point to fill the new time bin. <code>default_start</code> is used to fill first time bin if no data is present in the first time bin. Note that <code>tt_res</code> need not be equally spaced in time either.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L411-L425">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.find_delay" href="#SynthDiag.find_delay"><code>SynthDiag.find_delay</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">find_delay(
    data1::Vector{Float64},
    data2::Vector{Float64},
    dt::Float64,
)::Float64</code></pre><p>Find the delay between two signals using cross-correlation. The function returns the delay in seconds. The function assumes that <code>data1</code> is the reference signal and <code>data2</code> is the signal that is delayed with respect to <code>data1</code>. The funciton assumes that <code>data1</code> and <code>data2</code> are sampled at the same rate and are of same length. <code>dt</code> is the time resolution of the data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L451-L463">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.get_gas_injection_response" href="#SynthDiag.get_gas_injection_response"><code>SynthDiag.get_gas_injection_response</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_gas_injection_response(
    cmd::Vector{Float64},
    cmd_tt::Vector{Float64},
    P_ves::Vector{Float64},
    P_ves_tt::Vector{Float64},
    V_ves::Float64;
    resample_dt::Float64=0.02,
    gi_fit_guess::Vector{Float64}=[1.0, 1.0],
    response_curve_voltage::Vector{Float64}=collect(0:0.001:11),
)::Tuple{IMASDD.gas_injection__valve___response_curve, Dict{Symbol, Any}}</code></pre><p>Function to fit a gas calibration shot data to a gas injection model. It requires 2 set of data:</p><ul><li><code>cmd</code>, and <code>cmd_tt</code> are the command sent in Volts and the corresponding time axis.</li><li><code>P_ves</code> and <code>P_ves_tt</code> are the pressure in the vessel and the corresponding time axis.</li></ul><p><code>V_ves</code> is the volume of the vessel. The function returns a tuple of <code>response_curve</code> object and a valve model dictionary that can be used in <a href="#SynthDiag.compute_gas_injection!"><code>compute_gas_injection!</code></a> or <a href="#SynthDiag.compute_gas_injection"><code>compute_gas_injection</code></a> functions.</p><p>Optional keyword arguments:</p><ul><li><code>resample_dt</code>: Time resolution to resample the data.</li><li><code>gi_fit_guess</code>: Initial guess for the gas injection model parameters.</li><li><code>response_curve_voltage</code>: Voltage axis for storing the response curve.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L501-L528">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.gi_model" href="#SynthDiag.gi_model"><code>SynthDiag.gi_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gi_model(x::Vector{Float64}, p::Vector{Float64})::Vector{Float64}</code></pre><p>Non linear gas injection model. The model is given by:</p><p><span>$\Gamma = p_1 (\sqrt{x^2 p_2^2 + 1} - 1)$</span></p><p>where <code>x</code> is the input voltage in Volts and <span>$\Gamma$</span> is the flow rate in Pa m³/ s</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L473-L481">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.int_gi_model" href="#SynthDiag.int_gi_model"><code>SynthDiag.int_gi_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">int_gi_model(x::Vector{Float64}, p::Vector{Float64})::Vector{Float64}</code></pre><p>Cumulative sum of gas injection model. This function models the accumulated gas in the vessel volume. Note that this is a numerical cumulative sum and does not change the units of output. Returned output is in Pa m³/ s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L486-L492">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.get_required_gas_cmd" href="#SynthDiag.get_required_gas_cmd"><code>SynthDiag.get_required_gas_cmd</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_required_gas_cmd(
        required_flow_rate::Float64,
        response_curve::IMASDD.gas_injection__valve___response_curve,
    )::Float64</code></pre><p>Function to get the required gas command voltage to achieve the required flow rate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L573-L580">source</a></section><section><div><pre><code class="language-julia hljs">get_required_gas_cmd(
    required_flow_rate::Vector{Float64},
    response_curve::IMASDD.gas_injection__valve___response_curve,
)::Vector{Float64}</code></pre><p>Function to get the required gas command voltage to achieve the required flow rate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/gas_injection.jl#L589-L596">source</a></section></article><h2 id="Noise-model"><a class="docs-heading-anchor" href="#Noise-model">Noise model</a><a id="Noise-model-1"></a><a class="docs-heading-anchor-permalink" href="#Noise-model" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.Noise" href="#SynthDiag.Noise"><code>SynthDiag.Noise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Noise</code></pre><p>A structure to represent a noise model. It holds power spectral density of noise and/or the time series of noise. The power spectral density is stored as a <code>DSP.Periodograms.Periodogram</code> object.</p><p>Constructors:</p><pre><code class="nohighlight hljs">Noise(time::Vector{Float64}, signal::Vector{Float64}, binwidth::Float64)</code></pre><p>Create a noise model from a time series of noise. The power spectral density is calculated and stored for regenaeration of noise in future.</p><pre><code class="nohighlight hljs">Noise(pgram::DSP.Periodograms.Periodogram)</code></pre><p>Create a noise model from a power spectral density data given as a <code>DSP.Periodograms.Periodogram</code> object.</p><pre><code class="nohighlight hljs">Noise(power_spectrum::Vector{Float64}, freq::AbstractRange)</code></pre><p>Create a noise model from a power spectral density data given as a vector along with frequency values. The power spectral density is stored as a <code>DSP.Periodograms.Periodogram</code> calculated from the input data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/noise.jl#L5-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.generate_noise" href="#SynthDiag.generate_noise"><code>SynthDiag.generate_noise</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate_noise(n::Noise, t::Vector{Float64})::Vector{Float64}</code></pre><p>Generate a noise signal based on the power spectral density stored in the noise model that corresponds to the time axis <code>t</code>. The noise signal is generated by summing up the cosine waves with uniformly distributed random phase and amplitude based on the power spectral density.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/noise.jl#L72-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SynthDiag.generate_noise!" href="#SynthDiag.generate_noise!"><code>SynthDiag.generate_noise!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate_noise!(n::Noise, t::Vector{Float64})::Noise</code></pre><p>In-place version of <a href="#SynthDiag.generate_noise"><code>generate_noise()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SynthDiag.jl/blob/d5fa1b1d9fc3ea2e2ab0e1ce6fb0070f77b9d5b1/src/noise.jl#L89-L93">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 16 July 2024 23:58">Tuesday 16 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
